<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dfvue.dfvreadcsv &#8212; dfvue 0.0.0.dev0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for dfvue.dfvreadcsv</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Scatter/Line panel of dfvue.</span>

<span class="sd">The panel allows plotting variables against time or two variables against</span>
<span class="sd">each other. A second variable can be plotted in the same graph using the</span>
<span class="sd">right-hand-side y-axis.</span>

<span class="sd">This module was written by Matthias Cuntz while at Institut National de</span>
<span class="sd">Recherche pour l&#39;Agriculture, l&#39;Alimentation et l&#39;Environnement (INRAE), Nancy,</span>
<span class="sd">France.</span>

<span class="sd">:copyright: Copyright 2023- Matthias Cuntz - mc (at) macu (dot) de</span>
<span class="sd">:license: MIT License, see LICENSE for details.</span>

<span class="sd">.. moduleauthor:: Matthias Cuntz</span>

<span class="sd">The following classes are provided:</span>

<span class="sd">.. autosummary::</span>
<span class="sd">   read_csvopts</span>
<span class="sd">   read_csvdefaults</span>
<span class="sd">   read_csvhelp</span>
<span class="sd">   dfvReadcsv</span>

<span class="sd">History</span>
<span class="sd">    * Written Jul 2023 by Matthias Cuntz (mc (at) macu (dot) de)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">tkinter.ttk</span> <span class="k">as</span> <span class="nn">ttk</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s1">&#39;Using the themed widget set introduced in Tk 8.5.&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">.ncvwidgets</span> <span class="kn">import</span> <span class="n">add_entry</span><span class="p">,</span> <span class="n">add_tooltip</span><span class="p">,</span> <span class="n">Treeview</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;read_csvopts&#39;</span><span class="p">,</span> <span class="s1">&#39;read_csvdefaults&#39;</span><span class="p">,</span> <span class="s1">&#39;read_csvhelp&#39;</span><span class="p">,</span>
           <span class="s1">&#39;dfvReadcsv&#39;</span><span class="p">]</span>


<span class="n">read_csvopts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sep&#39;</span><span class="p">,</span> <span class="s1">&#39;index_col&#39;</span><span class="p">,</span> <span class="s1">&#39;usecols&#39;</span><span class="p">,</span> <span class="s1">&#39;skiprows&#39;</span><span class="p">,</span> <span class="s1">&#39;nrows&#39;</span><span class="p">,</span>
                <span class="s1">&#39;parse_dates&#39;</span><span class="p">,</span> <span class="s1">&#39;date_format&#39;</span><span class="p">,</span> <span class="s1">&#39;keep_date_col&#39;</span><span class="p">,</span>
                <span class="s1">&#39;header&#39;</span><span class="p">,</span> <span class="s1">&#39;names&#39;</span><span class="p">,</span>
                <span class="s1">&#39;na_filter&#39;</span><span class="p">,</span> <span class="s1">&#39;na_values&#39;</span><span class="p">,</span> <span class="s1">&#39;keep_default_na&#39;</span><span class="p">,</span>
                <span class="s1">&#39;true_values&#39;</span><span class="p">,</span> <span class="s1">&#39;false_values&#39;</span><span class="p">,</span>
                <span class="s1">&#39;skip_blank_lines&#39;</span><span class="p">,</span> <span class="s1">&#39;skipinitialspace&#39;</span><span class="p">,</span>
                <span class="s1">&#39;comment&#39;</span><span class="p">,</span> <span class="s1">&#39;skipfooter&#39;</span><span class="p">,</span>
                <span class="s1">&#39;thousands&#39;</span><span class="p">,</span> <span class="s1">&#39;decimal&#39;</span><span class="p">,</span> <span class="s1">&#39;lineterminator&#39;</span><span class="p">,</span>
                <span class="s1">&#39;quotechar&#39;</span><span class="p">,</span> <span class="s1">&#39;doublequote&#39;</span><span class="p">,</span>
                <span class="s1">&#39;dayfirst&#39;</span><span class="p">,</span> <span class="s1">&#39;encoding&#39;</span>
                <span class="p">]</span>
<span class="n">read_csvopts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;missing_value&#39;</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">pandas.read_csv options provided in form in the given order</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">read_csvdefaults</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sep&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;header&#39;</span><span class="p">:</span> <span class="s1">&#39;infer&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;names&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;index_col&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;usecols&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;engine&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;converters&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;true_values&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;false_values&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;skipinitialspace&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;skiprows&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;skipfooter&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nrows&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;na_values&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;keep_default_na&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;na_filter&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;skip_blank_lines&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;parse_dates&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;keep_date_col&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s1">&#39;date_format&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;dayfirst&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s1">&#39;cache_dates&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;iterator&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s1">&#39;chunksize&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;compression&#39;</span><span class="p">:</span> <span class="s1">&#39;infer&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;thousands&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;decimal&#39;</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;lineterminator&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;quotechar&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;quoting&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;doublequote&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;escapechar&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;encoding&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;encoding_errors&#39;</span><span class="p">:</span> <span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="s1">&#39;dialect&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;on_bad_lines&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;delim_whitespace&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s1">&#39;low_memory&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;memory_map&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s1">&#39;float_precision&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;storage_options&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
<span class="n">read_csvdefaults</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;missing_value&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">pandas.read_csv options defaults</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">read_csvhelp</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;file&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;str, path object or file-like object</span>
<span class="sd">    Any valid string path is acceptable. The string could be a URL. Valid</span>
<span class="sd">URL schemes include http, ftp, s3, gs, and file. For file URLs, a host is</span>
<span class="sd">expected. A local file could be: file://localhost/path/to/table.csv. If you</span>
<span class="sd">want to pass in a path object, pandas accepts any os.PathLike. By file-like</span>
<span class="sd">object, we refer to objects with a read() method, such as a file handle</span>
<span class="sd">(e.g. via builtin open function) or StringIO.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;sep&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;str, default: ,</span>
<span class="sd">    Delimiter to use. If sep is None, the C engine cannot automatically</span>
<span class="sd">detect the separator, but the Python parsing engine can, meaning the latter</span>
<span class="sd">will be used and automatically detect the separator by Python&#39;s builtin</span>
<span class="sd">sniffer tool, csv.Sniffer. In addition, separators longer than 1 character</span>
<span class="sd">and different from &#39;\s+&#39; will be interpreted as regular expressions and</span>
<span class="sd">will also force the use of the Python parsing engine. Note that regex</span>
<span class="sd">delimiters are prone to ignoring quoted data. Regex example: &#39;\r\t&#39;.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;header&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int, list of int, None, default: infer</span>
<span class="sd">    Row number(s) to use as the column names, and the start of the data.</span>
<span class="sd">Default behavior is to infer the column names: if no names are passed the</span>
<span class="sd">behavior is identical to header=0 and column names are inferred from the</span>
<span class="sd">first line of the file, if column names are passed explicitly then the</span>
<span class="sd">behavior is identical to header=None. Explicitly pass header=0 to be able</span>
<span class="sd">to replace existing names. The header can be a list of integers that</span>
<span class="sd">specify row locations for a multi-index on the columns e.g. [0,1,3].</span>
<span class="sd">Intervening rows that are not specified will be skipped (e.g. 2 in this</span>
<span class="sd">example is skipped). Note that this parameter ignores commented lines and</span>
<span class="sd">empty lines if skip_blank_lines=True, so header=0 denotes the first line of</span>
<span class="sd">data rather than the first line of the file.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;names&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;array-like, optional</span>
<span class="sd">    List of column names to use. If the file contains a header row, then</span>
<span class="sd">you should explicitly pass header=0 to override the column names.</span>
<span class="sd">Duplicates in this list are not allowed.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;index_col&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int, str, sequence of int / str, or False, optional, default: None</span>
<span class="sd">    Column(s) to use as the row labels of the DataFrame, either given as</span>
<span class="sd">string name or column index. If a sequence of int / str is given, a</span>
<span class="sd">MultiIndex is used.</span>
<span class="sd">Note: index_col=False can be used to force pandas to not use the first</span>
<span class="sd">column as the index, e.g. when you have a malformed file with delimiters at</span>
<span class="sd">the end of each line.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;usecols&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;list-like or callable, optional</span>
<span class="sd">    Return a subset of the columns. If list-like, all elements must either</span>
<span class="sd">be positional (i.e. integer indices into the document columns) or strings</span>
<span class="sd">that correspond to column names provided either by the user in names or</span>
<span class="sd">inferred from the document header row(s). If names are given, the document</span>
<span class="sd">header row(s) are not taken into account. For example, a valid list-like</span>
<span class="sd">usecols parameter would be [0, 1, 2] or [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]. Element</span>
<span class="sd">order is ignored, so usecols=[0, 1] is the same as [1, 0]. To instantiate a</span>
<span class="sd">DataFrame from data with element order preserved use pd.read_csv(data,</span>
<span class="sd">usecols=[&#39;foo&#39;, &#39;bar&#39;])[[&#39;foo&#39;, &#39;bar&#39;]] for columns in [&#39;foo&#39;, &#39;bar&#39;] order</span>
<span class="sd">or pd.read_csv(data, usecols=[&#39;foo&#39;, &#39;bar&#39;])[[&#39;bar&#39;, &#39;foo&#39;]] for [&#39;bar&#39;,</span>
<span class="sd">&#39;foo&#39;] order.</span>
<span class="sd">If callable, the callable function will be evaluated against the column</span>
<span class="sd">names, returning names where the callable function evaluates to True. An</span>
<span class="sd">example of a valid callable argument would be lambda x: x.upper() in</span>
<span class="sd">[&#39;AAA&#39;, &#39;BBB&#39;, &#39;DDD&#39;]. Using this parameter results in much faster parsing</span>
<span class="sd">time and lower memory usage.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;dtype&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Type name or dict of column -&gt; type, optional</span>
<span class="sd">    Data type for data or columns. E.g. {&#39;a&#39;: np.float64, &#39;b&#39;: np.int32,</span>
<span class="sd">&#39;c&#39;: &#39;Int64&#39;} Use str or object together with suitable na_values settings</span>
<span class="sd">to preserve and not interpret dtype. If converters are specified, they will</span>
<span class="sd">be applied INSTEAD of dtype conversion.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;engine&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;{&#39;c&#39;, &#39;python&#39;, &#39;pyarrow&#39;}, optional</span>
<span class="sd">    Parser engine to use. The C and pyarrow engines are faster, while the</span>
<span class="sd">python engine is currently more feature-complete. Multithreading is</span>
<span class="sd">currently only supported by the pyarrow engine.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;converters&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;dict, optional</span>
<span class="sd">    Dict of functions for converting values in certain columns. Keys can</span>
<span class="sd">either be integers or column labels.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;true_values&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;list, optional</span>
<span class="sd">    Values to consider as True in addition to case-insensitive variants of</span>
<span class="sd">&#39;True&#39;.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;false_values&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;list, optional</span>
<span class="sd">    Values to consider as False in addition to case-insensitive variants of</span>
<span class="sd">&#39;False&#39;.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;skipinitialspace&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    Skip spaces after delimiter.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;skiprows&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;list-like, int or callable, optional</span>
<span class="sd">    Line numbers to skip (0-indexed) or number of lines to skip (int) at</span>
<span class="sd">the start of the file.</span>
<span class="sd">If callable, the callable function will be evaluated against the row</span>
<span class="sd">indices, returning True if the row should be skipped and False otherwise.</span>
<span class="sd">An example of a valid callable argument would be lambda x: x in [0, 2].&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;skipfooter&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int, default: 0</span>
<span class="sd">    Number of lines at bottom of file to skip (Unsupported with</span>
<span class="sd">engine=&#39;c&#39;).&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;nrows&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int, optional</span>
<span class="sd">    Number of rows of file to read. Useful for reading pieces of large</span>
<span class="sd">files.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;na_values&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;scalar, str, list-like, or dict, optional</span>
<span class="sd">    Additional strings to recognize as NA/NaN. If dict passed, specific</span>
<span class="sd">per-column NA values. By default the following values are interpreted as</span>
<span class="sd">NaN: &#39;&#39;, &#39;#N/A&#39;, &#39;#N/A N/A&#39;, &#39;#NA&#39;, &#39;-1.#IND&#39;, &#39;-1.#QNAN&#39;, &#39;-NaN&#39;, &#39;-nan&#39;,</span>
<span class="sd">&#39;1.#IND&#39;, &#39;1.#QNAN&#39;, &#39;&lt;NA&gt;&#39;, &#39;N/A&#39;, &#39;NA&#39;, &#39;NULL&#39;, &#39;NaN&#39;, &#39;None&#39;, &#39;n/a&#39;,</span>
<span class="sd">&#39;nan&#39;, &#39;null&#39;.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;keep_default_na&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    Whether or not to include the default NaN values when parsing the data.</span>
<span class="sd">Depending on whether na_values is passed in, the behavior is as follows:</span>
<span class="sd">If keep_default_na is True, and na_values are specified, na_values is</span>
<span class="sd">appended to the default NaN values used for parsing.</span>
<span class="sd">If keep_default_na is True, and na_values are not specified, only the</span>
<span class="sd">default NaN values are used for parsing.</span>
<span class="sd">If keep_default_na is False, and na_values are specified, only the NaN</span>
<span class="sd">values specified na_values are used for parsing.</span>
<span class="sd">If keep_default_na is False, and na_values are not specified, no strings</span>
<span class="sd">will be parsed as NaN.</span>
<span class="sd">Note that if na_filter is passed in as False, the keep_default_na and</span>
<span class="sd">na_values parameters will be ignored.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;na_filter&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    Detect missing value markers (empty strings and the value of</span>
<span class="sd">na_values). In data without any NAs, passing na_filter=False can improve</span>
<span class="sd">the performance of reading a large file.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;verbose&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    Indicate number of NA values placed in non-numeric columns.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;skip_blank_lines&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    If True, skip over blank lines rather than interpreting as NaN values.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;parse_dates&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool or list of int or names or list of lists or dict, default: False</span>
<span class="sd">The behavior is as follows:</span>
<span class="sd">boolean. If True -&gt; try parsing the index.</span>
<span class="sd">list of int or names. e.g. If [1, 2, 3] -&gt; try parsing columns 1, 2, 3 each</span>
<span class="sd">as a separate date column.</span>
<span class="sd">list of lists. e.g. If [[1, 3]] -&gt; combine columns 1 and 3 and parse as a</span>
<span class="sd">single date column.</span>
<span class="sd">dict, e.g. {&#39;foo&#39; : [1, 3]} -&gt; parse columns 1, 3 as date and call result &#39;foo&#39;</span>
<span class="sd">If a column or index cannot be represented as an array of datetimes, say</span>
<span class="sd">because of an unparsable value or a mixture of timezones, the column or</span>
<span class="sd">index will be returned unaltered as an object data type. For non-standard</span>
<span class="sd">datetime parsing, use pd.to_datetime after pd.read_csv.</span>
<span class="sd">Note: A fast-path exists for iso8601-formatted dates.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;keep_date_col&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    If True and parse_dates specifies combining multiple columns then keep</span>
<span class="sd">the original columns.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;date_format&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str or dict of column -&gt; format, default: None</span>
<span class="sd">    If used in conjunction with parse_dates, will parse dates according to</span>
<span class="sd">this format. For anything more complex, please read in as object and then</span>
<span class="sd">apply to_datetime() as-needed.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;dayfirst&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    DD/MM format dates, international and European format.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;cache_dates&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    If True, use a cache of unique, converted dates to apply the datetime</span>
<span class="sd">conversion. May produce significant speed-up when parsing duplicate date</span>
<span class="sd">strings, especially ones with timezone offsets.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;iterator&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    Return TextFileReader object for iteration or getting chunks with</span>
<span class="sd">get_chunk().&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;chunksize&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int, optional</span>
<span class="sd">    Return TextFileReader object for iteration. See the IO Tools docs for</span>
<span class="sd">more information on iterator and chunksize.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;compression&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str or dict, default: &#39;infer&#39;</span>
<span class="sd">    For on-the-fly decompression of on-disk data. If &#39;infer&#39; and</span>
<span class="sd">&#39;filepath_or_buffer&#39; is path-like, then detect compression from the</span>
<span class="sd">following extensions: &#39;.gz&#39;, &#39;.bz2&#39;, &#39;.zip&#39;, &#39;.xz&#39;, &#39;.zst&#39;, &#39;.tar&#39;,</span>
<span class="sd">&#39;.tar.gz&#39;, &#39;.tar.xz&#39; or &#39;.tar.bz2&#39; (otherwise no compression). If using</span>
<span class="sd">&#39;zip&#39; or &#39;tar&#39;, the ZIP file must contain only one data file to be read in.</span>
<span class="sd">Set to None for no decompression. Can also be a dict with key &#39;method&#39; set</span>
<span class="sd">to one of {&#39;zip&#39;, &#39;gzip&#39;, &#39;bz2&#39;, &#39;zstd&#39;, &#39;tar&#39;} and other key-value pairs</span>
<span class="sd">are forwarded to zipfile.ZipFile, gzip.GzipFile, bz2.BZ2File,</span>
<span class="sd">zstandard.ZstdDecompressor or tarfile.TarFile, respectively. As an example,</span>
<span class="sd">the following could be passed for Zstandard decompression using a custom</span>
<span class="sd">compression dictionary: compression={&#39;method&#39;: &#39;zstd&#39;, &#39;dict_data&#39;:</span>
<span class="sd">my_compression_dict}.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;thousands&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str, optional</span>
<span class="sd">    Thousands separator.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;decimal&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str, default: &#39;.&#39;</span>
<span class="sd">    Character to recognize as decimal point (e.g. use &#39;,&#39; for European</span>
<span class="sd">data).&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;lineterminator&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str (length 1), optional</span>
<span class="sd">    Character to break file into lines. Only valid with C parser.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;quotechar&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str (length 1), optional</span>
<span class="sd">    The character used to denote the start and end of a quoted item. Quoted</span>
<span class="sd">items can include the delimiter and it will be ignored.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;quoting&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;int or csv.QUOTE_* instance, default: 0</span>
<span class="sd">    Control field quoting behavior per csv.QUOTE_* constants. Use one of</span>
<span class="sd">QUOTE_MINIMAL (0), QUOTE_ALL (1), QUOTE_NONNUMERIC (2) or QUOTE_NONE (3).&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;doublequote&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    When quotechar is specified and quoting is not QUOTE_NONE, indicate</span>
<span class="sd">whether or not to interpret two consecutive quotechar elements INSIDE a</span>
<span class="sd">field as a single quotechar element.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;escapechar&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str (length 1), optional</span>
<span class="sd">    One-character string used to escape other characters.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;comment&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;str, optional</span>
<span class="sd">    Indicates remainder of line should not be parsed. If found at the</span>
<span class="sd">beginning of a line, the line will be ignored altogether. This parameter</span>
<span class="sd">must be a single character. Like empty lines (as long as</span>
<span class="sd">skip_blank_lines=True), fully commented lines are ignored by the parameter</span>
<span class="sd">header but not by skiprows. For example, if comment=&#39;#&#39;, parsing</span>
<span class="sd">#empty\na,b,c\n1,2,3 with header=0 will result in &#39;a,b,c&#39; being treated as</span>
<span class="sd">the header.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;encoding&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str, optional, default: &#39;utf-8&#39;</span>
<span class="sd">    Encoding to use for UTF when reading/writing (ex. &#39;utf-8&#39;). List of</span>
<span class="sd">Python standard encodings.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;encoding_errors&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str, optional, default: &#39;strict&#39;</span>
<span class="sd">    How encoding errors are treated. List of possible values.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;dialect&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str or csv.Dialect, optional</span>
<span class="sd">    If provided, this parameter will override values (default or not) for</span>
<span class="sd">the following parameters: delimiter, doublequote, escapechar,</span>
<span class="sd">skipinitialspace, quotechar, and quoting. If it is necessary to override</span>
<span class="sd">values, a ParserWarning will be issued. See csv.Dialect documentation for</span>
<span class="sd">more details.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;on_bad_lines&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;{&#39;error&#39;, &#39;warn&#39;, &#39;skip&#39;} or callable, default: &#39;error&#39;</span>
<span class="sd">    Specifies what to do upon encountering a bad line (a line with too many</span>
<span class="sd">fields). Allowed values are :</span>
<span class="sd">&#39;error&#39;, raise an Exception when a bad line is encountered.</span>
<span class="sd">&#39;warn&#39;, raise a warning when a bad line is encountered and skip that line.</span>
<span class="sd">&#39;skip&#39;, skip bad lines without raising or warning when they are</span>
<span class="sd">    encountered.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;delim_whitespace&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    Specifies whether or not whitespace (e.g. &#39; &#39; or &#39; &#39;) will be used as</span>
<span class="sd">the sep. Equivalent to setting sep=&#39;\s+&#39;. If this option is set to True,</span>
<span class="sd">nothing should be passed in for the delimiter parameter.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;low_memory&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: True</span>
<span class="sd">    Internally process the file in chunks, resulting in lower memory use</span>
<span class="sd">while parsing, but possibly mixed type inference. To ensure no mixed types</span>
<span class="sd">either set False, or specify the type with the dtype parameter. Note that</span>
<span class="sd">the entire file is read into a single DataFrame regardless, use the</span>
<span class="sd">chunksize or iterator parameter to return the data in chunks. (Only valid</span>
<span class="sd">with C parser).&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;memory_map&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bool, default: False</span>
<span class="sd">    If a filepath is provided for filepath_or_buffer, map the file object</span>
<span class="sd">directly onto memory and access the data directly from there. Using this</span>
<span class="sd">option can improve performance because there is no longer any I/O overhead.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;float_precision&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;str, optional</span>
<span class="sd">    Specifies which converter the C engine should use for floating-point</span>
<span class="sd">values. The options are None or &#39;high&#39; for the ordinary converter, &#39;legacy&#39;</span>
<span class="sd">for the original lower precision pandas converter, and &#39;round_trip&#39; for the</span>
<span class="sd">round-trip converter.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;storage_options&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;dict, optional</span>
<span class="sd">    Extra options that make sense for a particular storage connection, e.g.</span>
<span class="sd">host, port, username, password, etc. For HTTP(S) URLs the key-value pairs</span>
<span class="sd">are forwarded to urllib.request.Request as header options. For other URLs</span>
<span class="sd">(e.g. starting with &#39;s3://&#39;, and &#39;gcs://&#39;) the key-value pairs are</span>
<span class="sd">forwarded to fsspec.open. Please see fsspec and urllib for more details,</span>
<span class="sd">and for more examples on storage options refer here.&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;dtype_backend&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;{&#39;numpy_nullable&#39;, &#39;pyarrow&#39;}, defaults to NumPy backed DataFrames</span>
<span class="sd">    Which dtype_backend to use, e.g. whether a DataFrame should have NumPy</span>
<span class="sd">arrays, nullable dtypes are used for all dtypes that have a nullable</span>
<span class="sd">implementation when &#39;numpy_nullable&#39; is set, pyarrow is used for all dtypes</span>
<span class="sd">if &#39;pyarrow&#39; is set.</span>
<span class="sd">The dtype_backends are still experimental.&quot;&quot;&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">read_csvhelp</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;missing_value&#39;</span><span class="p">:</span>
                     <span class="sa">r</span><span class="s1">&#39;scalar or str\n&#39;</span>
                     <span class="sa">r</span><span class="s1">&#39;    Additional value to na_values set to NA/NaN.&#39;</span><span class="p">})</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Tooltips for pandas.read_csv options from pandas v2.0.3</span>

<span class="sd">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="dfvReadcsv"><a class="viewcode-back" href="../../dfvreadcsv.html#dfvue.dfvreadcsv.dfvReadcsv">[docs]</a><span class="k">class</span> <span class="nc">dfvReadcsv</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Window for reading csv files.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#</span>
    <span class="c1"># Setup panel</span>
    <span class="c1">#</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">top</span>  <span class="c1"># top window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">callback</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;dfvReadcsv&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Read csv file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;1000x510+100+10&#39;</span><span class="p">)</span>

        <span class="c1"># copy for ease of use</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">csvfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">csvfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">miss</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">miss</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">cols</span>

        <span class="c1"># space</span>
        <span class="n">rootspace</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">rootspace</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">rootspacespace</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">rootspace</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">rootspacespace</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

        <span class="c1"># 1. row - treeview current DataFrame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rowtree</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rowtree</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No df&#39;</span><span class="p">)</span>
            <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="sa">f</span><span class="s1">&#39;Column </span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s1">03d</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncols</span><span class="p">)</span> <span class="p">]</span>
            <span class="n">dat</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">ncols</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="p">]</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_tree</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="c1"># space</span>
        <span class="n">treespace</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">treespace</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">treespacespace</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">treespace</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">treespacespace</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

        <span class="c1"># label for read_csv options</span>
        <span class="n">opthead</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">opthead</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">optheadlabel</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">opthead</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Options for pandas.read_csv&#39;</span><span class="p">)</span>
        <span class="n">optheadlabel</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

        <span class="c1"># option fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opt</span> <span class="o">=</span> <span class="p">{}</span>     <span class="c1"># option</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optlbl</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opttip</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># tooltip</span>

        <span class="c1"># rows with pandas.read_csv options</span>
        <span class="n">oend</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nopt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">read_csvopts</span><span class="p">)</span>
        <span class="n">noptrow</span> <span class="o">=</span> <span class="n">nopt</span> <span class="o">//</span> <span class="mi">4</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">nopt</span> <span class="o">%</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">noptrow</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labelwidth</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="n">entrywidth</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">padlabel</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">for</span> <span class="n">nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noptrow</span><span class="p">):</span>
            <span class="n">ostart</span> <span class="o">=</span> <span class="n">oend</span>
            <span class="n">oend</span> <span class="o">=</span> <span class="n">ostart</span> <span class="o">+</span> <span class="mi">5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">oo</span> <span class="ow">in</span> <span class="n">read_csvopts</span><span class="p">[</span><span class="n">ostart</span><span class="p">:</span><span class="n">oend</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">optlbl</span><span class="p">[</span><span class="n">oo</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">[</span><span class="n">oo</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">opttip</span><span class="p">[</span><span class="n">oo</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_entry</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">oo</span><span class="p">,</span>
                    <span class="n">padlabel</span><span class="o">=</span><span class="n">padlabel</span><span class="p">,</span> <span class="n">labelwidth</span><span class="o">=</span><span class="n">labelwidth</span><span class="p">,</span>
                    <span class="n">text</span><span class="o">=</span><span class="n">read_csvdefaults</span><span class="p">[</span><span class="n">oo</span><span class="p">],</span>
                    <span class="n">width</span><span class="o">=</span><span class="n">entrywidth</span><span class="p">,</span>
                    <span class="n">tooltip</span><span class="o">=</span><span class="n">read_csvhelp</span><span class="p">[</span><span class="n">oo</span><span class="p">],</span>
                    <span class="n">command</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">read_again</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_final</span><span class="p">])</span>
        <span class="c1"># overwrite default of missing_value from command line</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">miss</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">[</span><span class="s1">&#39;missing_value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">miss</span><span class="p">))</span>
        <span class="c1"># add cancel and read buttons to last row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Read csv&quot;</span><span class="p">,</span>
                               <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_final</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">donetip</span> <span class="o">=</span> <span class="n">add_tooltip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">,</span> <span class="s1">&#39;Finished reading csv&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowopt</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canceltip</span> <span class="o">=</span> <span class="n">add_tooltip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel</span><span class="p">,</span> <span class="s1">&#39;Cancel reading csv file&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">focus_force</span><span class="p">()</span>

    <span class="c1">#</span>
    <span class="c1"># Event bindings</span>
    <span class="c1">#</span>

<div class="viewcode-block" id="dfvReadcsv.new_tree"><a class="viewcode-back" href="../../dfvreadcsv.html#dfvue.dfvreadcsv.dfvReadcsv.new_tree">[docs]</a>    <span class="k">def</span> <span class="nf">new_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make new Treeview widget and fill it with pandas.Dataframe</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">Treeview</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowtree</span><span class="p">,</span> <span class="n">xscroll</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">yscroll</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">tag_configure</span><span class="p">(</span><span class="s2">&quot;even&quot;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                                <span class="n">foreground</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">tag_configure</span><span class="p">(</span><span class="s2">&quot;odd&quot;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>
                                <span class="n">foreground</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="c1"># fill</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="s1">&#39;index &#39;</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="s2">&quot;headings&quot;</span><span class="p">,</span>
                         <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="c1"># columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># if sep not correct show long line</span>
            <span class="n">cwidth</span> <span class="o">=</span> <span class="mi">700</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cwidth</span> <span class="o">=</span> <span class="mi">150</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">cwidth</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="c1"># rows</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="n">values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;even&#39;</span><span class="p">,)</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">(</span><span class="s1">&#39;odd&#39;</span><span class="p">,)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="dfvReadcsv.read_df"><a class="viewcode-back" href="../../dfvreadcsv.html#dfvue.dfvreadcsv.dfvReadcsv.read_df">[docs]</a>    <span class="k">def</span> <span class="nf">read_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        pandas.read_csv using options from entry fields</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">oo</span> <span class="ow">in</span> <span class="n">read_csvopts</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">[</span><span class="n">oo</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;True&#39;</span><span class="p">:</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;False&#39;</span><span class="p">:</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">tt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">tt</span> <span class="o">=</span> <span class="n">text</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">tt</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">tt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">oo</span><span class="p">:</span> <span class="n">tt</span><span class="p">})</span>
        <span class="c1"># skipfooter does not work with nrows</span>
        <span class="k">if</span> <span class="n">nrows</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;nrows&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nrows</span>
            <span class="k">del</span> <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;skipfooter&#39;</span><span class="p">]</span>
        <span class="c1"># add missing_value to na_values</span>
        <span class="k">if</span> <span class="s1">&#39;missing_value&#39;</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;na_values&#39;</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">):</span>
                    <span class="n">nn</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">])</span>
                    <span class="n">nn</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">opts</span><span class="p">[</span><span class="s1">&#39;missing_value&#39;</span><span class="p">])</span>
                    <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nn</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">],</span>
                                         <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;missing_value&#39;</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;na_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;missing_value&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;missing_value&#39;</span><span class="p">]</span>
        <span class="c1"># date_format introduced in pandas v2.0.0</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&lt;</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;date_format&#39;</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
                <span class="n">date_parser</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">date</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span>
                    <span class="n">date</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">opts</span><span class="p">[</span><span class="s1">&#39;date_format&#39;</span><span class="p">])</span>
                <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;date_parser&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date_parser</span>
                <span class="k">del</span> <span class="n">opts</span><span class="p">[</span><span class="s1">&#39;date_format&#39;</span><span class="p">]</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.df = pd.read_csv(self.csvfile, **opts)</span>
        <span class="c1"># except TypeError:</span>
        <span class="c1">#     print(&#39;Did not work&#39;)</span>
        <span class="c1">#     pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">csvfile</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span></div>

<div class="viewcode-block" id="dfvReadcsv.read_again"><a class="viewcode-back" href="../../dfvreadcsv.html#dfvue.dfvreadcsv.dfvReadcsv.read_again">[docs]</a>    <span class="k">def</span> <span class="nf">read_again</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_df</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_tree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">)</span></div>

<div class="viewcode-block" id="dfvReadcsv.read_final"><a class="viewcode-back" href="../../dfvreadcsv.html#dfvue.dfvreadcsv.dfvReadcsv.read_final">[docs]</a>    <span class="k">def</span> <span class="nf">read_final</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_df</span><span class="p">()</span>
        <span class="c1"># add index as column</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="s1">&#39;df.index&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span>
                       <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cc</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">rows</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">cc</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">)&#39;</span>
                      <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">dfvue</a></h1>



<p class="blurb">A minimal GUI for a quick view of csv files.</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">dfvue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package.html">API</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/mcuntz/dfvue">dfvue @ GitHub</a></li>
    
    <li class="toctree-l1"><a href="https://doi.org/10.5281/zenodo.5574388">dfvue @ Zenodo</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/dfvue">dfvue @ PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://anaconda.org/conda-forge/dfvue">dfvue @ conda-forge</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020-2023, Matthias Cuntz.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>